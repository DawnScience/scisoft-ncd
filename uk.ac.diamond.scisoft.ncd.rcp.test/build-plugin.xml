<project name="plugin-uk.ac.diamond.scisoft.ncd.rcp.test" basedir=".">

    <dirname property="GDA-plugin.basedir" file="${ant.file.${ant.project.name}}" />
    <import file="../../builder/build-common.xml" />

    <!-- ====================================================================
           Invoke the tests
         ==================================================================== -->

    <target name="junit-tests" depends="toolCheck, set-test-base">
        <junit-call description="${ant.project.name} Java JUnit tests">
            <formatter type="xml" />
            <classpath>
                <pathelement location="${junitjar.loc}" />
                <path refid="libs.jars.path" />
                <pathelement location="${GDA-plugin.basedir}/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.api/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.common/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.core/classes/main" />
                <pathelement location="${plugins.dir}/uk.ac.diamond.scisoft.analysis/bin" />
                <pathelement location="${plugins.dir}/uk.ac.diamond.scisoft.ncd.rcp/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.server.ncd/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.nexus/bin" />
                <pathelement location="${plugins.dir}/uk.ac.gda.nexus/jars/jnexus-4.3.jar" />
                <path refid="thirdparty.jars.path" />
            </classpath>
            <batchtest todir="@{report.dir}">
                <fileset dir="${GDA-plugin.basedir}/src">
                    <include name="**/*Test.java" />
                    <exclude name="**/*PluginTest.java" />
                </fileset>
            </batchtest>
        </junit-call>
    </target>

</project>